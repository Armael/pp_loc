<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Input (pp_loc.Pp_loc.Input)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">pp_loc</a> &#x00BB; <a href="../index.html">Pp_loc</a> &#x00BB; Input</nav><h1>Module <code>Pp_loc.Input</code></h1><p>Abstraction over the input containing the input to read from.</p><nav class="toc"><ul><li><a href="#high-level-functions">High-level functions</a></li><li><a href="#low-level-functions">Low-level functions</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The abstract input type. Informally, an &quot;input&quot; of type <code>t</code> should support:</p><ul><li>seeking the cursor to a given initial position (as a number of bytes)</li><li>from this position, read the input byte per byte</li></ul></dd></dl><section><header><h3 id="high-level-functions"><a href="#high-level-functions" class="anchor"></a>High-level functions</h3></header><dl><dt class="spec value" id="val-file"><a href="#val-file" class="anchor"></a><code><span class="keyword">val</span> file : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>file fname</code> is an input that corresponds to the content of the file named <code>fname</code>.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>string s</code> is an input that corresponds to the content of the string <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-bytes"><a href="#val-bytes" class="anchor"></a><code><span class="keyword">val</span> bytes : bytes <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>bytes b</code> is an input that corresponds to the content of the bytes array <code>b</code>.</p></dd></dl></section><section><header><h3 id="low-level-functions"><a href="#low-level-functions" class="anchor"></a>Low-level functions</h3></header><dl><dt class="spec value" id="val-raw"><a href="#val-raw" class="anchor"></a><code><span class="keyword">val</span> raw : <span>seek:<span>(int <span>&#45;&gt;</span> <span><span>(unit, <span>[ `Invalid_position ]</span>)</span> Stdlib.result</span>)</span></span> <span>&#45;&gt;</span> <span>read_char:<span>(unit <span>&#45;&gt;</span> <span><span>(char, <span>[ `End_of_input ]</span>)</span> Stdlib.result</span>)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Creates an input from functions <code>seek</code> and <code>read</code>.</p><p>The function <code>seek</code> will be called once, before any call to <code>read_char</code>. If the call to <code>seek</code> fails and returns <code>Error `Invalid_position</code>, the input is considered to be unreadable and will be treated equivalenty as the empty input. This might happen even if the input is valid, if one tries to highlight an invalid location.</p></dd></dl><dl><dt class="spec value" id="val-managed"><a href="#val-managed" class="anchor"></a><code><span class="keyword">val</span> managed : <span>(unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * <span>(unit <span>&#45;&gt;</span> unit)</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>managed f</code> enables creating an input which lifetime is managed explicitely. In other words, it handles inputs with explicit open and close operations.</p><p>For instance, a file (which needs to be explicitely opened then close) is an instance of <code>managed</code>.</p><p>If <code>f()</code> returns <code>(i, c)</code>, then using the input <code>managed f</code> will first call <code>f()</code> to access the underlying input <code>i</code>, and will terminate by calling <code>c ()</code>.</p></dd></dl></section></div></body></html>